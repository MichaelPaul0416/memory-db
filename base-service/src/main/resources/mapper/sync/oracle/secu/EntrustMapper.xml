<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.paul.base.sync.oracle.secu.dao.EntrustMapper" >
  <resultMap id="BaseResultMap" type="com.paul.base.sync.oracle.secu.model.Entrust" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="INIT_DATE" property="initDate" jdbcType="DECIMAL" />
    <result column="CURR_DATE" property="currDate" jdbcType="DECIMAL" />
    <result column="CURR_TIME" property="currTime" jdbcType="DECIMAL" />
    <result column="ENTRUST_NO" property="entrustNo" jdbcType="DECIMAL" />
    <result column="OP_BRANCH_NO" property="opBranchNo" jdbcType="DECIMAL" />
    <result column="OPERATOR_NO" property="operatorNo" jdbcType="VARCHAR" />
    <result column="OP_ENTRUST_WAY" property="opEntrustWay" jdbcType="CHAR" />
    <result column="OP_STATION" property="opStation" jdbcType="VARCHAR" />
    <result column="BATCH_NO" property="batchNo" jdbcType="DECIMAL" />
    <result column="BRANCH_NO" property="branchNo" jdbcType="DECIMAL" />
    <result column="FUND_ACCOUNT" property="fundAccount" jdbcType="VARCHAR" />
    <result column="CLIENT_ID" property="clientId" jdbcType="VARCHAR" />
    <result column="EXCHANGE_TYPE" property="exchangeType" jdbcType="VARCHAR" />
    <result column="STOCK_ACCOUNT" property="stockAccount" jdbcType="VARCHAR" />
    <result column="REPORT_ACCOUNT" property="reportAccount" jdbcType="VARCHAR" />
    <result column="SEAT_NO" property="seatNo" jdbcType="VARCHAR" />
    <result column="STOCK_CODE" property="stockCode" jdbcType="VARCHAR" />
    <result column="STOCK_TYPE" property="stockType" jdbcType="VARCHAR" />
    <result column="ENTRUST_BS" property="entrustBs" jdbcType="CHAR" />
    <result column="ENTRUST_AMOUNT" property="entrustAmount" jdbcType="DECIMAL" />
    <result column="ENTRUST_PRICE" property="entrustPrice" jdbcType="DECIMAL" />
    <result column="ENTRUST_TYPE" property="entrustType" jdbcType="CHAR" />
    <result column="ENTRUST_PROP" property="entrustProp" jdbcType="VARCHAR" />
    <result column="REPORT_TIME" property="reportTime" jdbcType="DECIMAL" />
    <result column="REPORT_NO" property="reportNo" jdbcType="DECIMAL" />
    <result column="RECORD_NO" property="recordNo" jdbcType="DECIMAL" />
    <result column="BUSINESS_AMOUNT" property="businessAmount" jdbcType="DECIMAL" />
    <result column="WITHDRAW_AMOUNT" property="withdrawAmount" jdbcType="DECIMAL" />
    <result column="BUSINESS_PRICE" property="businessPrice" jdbcType="DECIMAL" />
    <result column="BUSINESS_BALANCE" property="businessBalance" jdbcType="DECIMAL" />
    <result column="CLEAR_BALANCE" property="clearBalance" jdbcType="DECIMAL" />
    <result column="PREV_BALANCE" property="prevBalance" jdbcType="DECIMAL" />
    <result column="REPORT_BS" property="reportBs" jdbcType="CHAR" />
    <result column="STORE_UNIT" property="storeUnit" jdbcType="DECIMAL" />
    <result column="REPORT_UNIT" property="reportUnit" jdbcType="DECIMAL" />
    <result column="ERROR_NO" property="errorNo" jdbcType="DECIMAL" />
    <result column="ENTRUST_STATUS" property="entrustStatus" jdbcType="CHAR" />
    <result column="MONEY_TYPE" property="moneyType" jdbcType="VARCHAR" />
    <result column="CLIENT_GROUP" property="clientGroup" jdbcType="DECIMAL" />
    <result column="ROOM_CODE" property="roomCode" jdbcType="DECIMAL" />
    <result column="CANCEL_SERIALNO" property="cancelSerialno" jdbcType="VARCHAR" />
    <result column="FARE_KIND" property="fareKind" jdbcType="DECIMAL" />
    <result column="POSITION_STR" property="positionStr" jdbcType="VARCHAR" />
    <result column="LOGIN_PBU" property="loginPbu" jdbcType="VARCHAR" />
    <result column="ORDER_ID" property="orderId" jdbcType="VARCHAR" />
    <result column="ORIG_ORDER_ID" property="origOrderId" jdbcType="VARCHAR" />
    <result column="EXT_ORDER_ID" property="extOrderId" jdbcType="VARCHAR" />
    <result column="SUB_STOCK_TYPE" property="subStockType" jdbcType="VARCHAR" />
  </resultMap>


  <resultMap id="transferMap" type="com.paul.base.sync.oracle.secu.model.TransferPageMap">
    <result column="OP_ENTRUST_WAY" property="opEntrustWay" jdbcType="CHAR" />
    <result column="REPORT_TIME" property="reportTime" jdbcType="DECIMAL" />
    <result column="FARE_KIND" property="fareKind" jdbcType="DECIMAL" />
    <result column="ENTRUST_TYPE" property="entrustType" jdbcType="CHAR" />
    <result column="ENTRUST_NO" property="entrustNo" jdbcType="DECIMAL" />
    <result column="ROOM_CODE" property="roomCode" jdbcType="DECIMAL" />
    <result column="FUND_ACCOUNT" property="fundAccount" jdbcType="VARCHAR" />
    <result column="STOCK_ACCOUNT" property="stockAccount" jdbcType="VARCHAR" />
    <result column="ENTRUST_PROP" property="entrustProp" jdbcType="VARCHAR" />
    <result column="ORDER_ID" property="orderId" jdbcType="VARCHAR" />
    <result column="ENTRUST_BS" property="entrustBs" jdbcType="CHAR" />
    <result column="REPORT_ACCOUNT" property="reportAccount" jdbcType="VARCHAR" />
    <result column="EXCHANGE_TYPE" property="exchangeType" jdbcType="VARCHAR" />
    <result column="FARE_KIND_STR" property="fareKindStr" jdbcType="VARCHAR" />
    <result column="DISCOUNT_MODEL" property="discountModel" jdbcType="DECIMAL" />
    <result column="BRANCH_NO" property="branchNo" jdbcType="DECIMAL" />
  </resultMap>

  <select id="queryByCondition" parameterType="com.paul.base.sync.oracle.secu.model.Entrust" resultMap="BaseResultMap">
      select * from entrust where batch_no = #{batchNo}
  </select>

  <select id="queryByPage" parameterType="com.paul.base.sync.oracle.Pager" resultMap="BaseResultMap">
    SELECT * FROM ( SELECT A.*, ROWNUM RN
    FROM (SELECT * FROM entrust) A WHERE ROWNUM &lt;= #{end} ) WHERE RN &gt;= #{start}
  </select>

  <select id="totalNumber" resultType="java.lang.Integer">
      select count(*) from hs_asset.fundaccount
  </select>

  <select id="transferPageDataToH2" parameterType="com.paul.base.sync.oracle.Pager" resultMap="transferMap">
    select W.*, Q.fare_kind_str,Q.discount_model,Q.branch_no
    from (SELECT *
    FROM (SELECT A.*, ROWNUM RN
    FROM (select entrust.branch_no,
    entrust.op_entrust_way as entrust_way,
    entrust.report_time,
    entrust.fare_kind,
    entrust.entrust_type,
    entrust.entrust_no,
    entrust.room_code,
    entrust.fund_account,
    entrust.stock_account,
    entrust.entrust_prop,
    entrust.order_id,
    entrust.entrust_bs,
    entrust.report_account,
    entrust.exchange_type
    from hs_secu.entrust entrust
    order by entrust.fund_account) A
    WHERE ROWNUM &lt;= #{end})
    WHERE RN &gt;= #{start}) W,
    (select *
    from (select A.*, ROWNUM RN
    from (select fundaccount.fare_kind_str,
    fundaccount.discount_model,
    fundaccount.branch_no,
    fundaccount.fund_account
    from hs_asset.fundaccount fundaccount
    order by fundaccount.fund_account) A
    where ROWNUM &lt; #{end})
    where RN &gt;= #{start}) Q
    where W.fund_account = Q.fund_account

  </select>
</mapper>